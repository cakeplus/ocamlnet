<html><head><!--
     Copyright (c) 1998-2000 The OpenSSL Project, http://www.openssl.org/
     Author:   OpenSSL Project (openssl@openssl.org)
     Modified: 2005-03-30 14:01:01.
     Generated from ``SSL_write.wml'' via WML 2.0.9 (18-Oct-2002).
               by OpenSSL Project (openssl@openssl.org)
               on 2005-03-31 15:09:12.

     DO NOT EDIT THIS FILE DIRECTLY! INSTEAD EDIT ``SSL_write.wml''.
-->

<meta name="Copyright" content="1998-2000 The OpenSSL Project, http://www.openssl.org/">
<meta name="Author" content="OpenSSL Project, openssl@openssl.org">
<meta name="Generator" content="WML 2.0.9 (18-Oct-2002)">
<meta name="Modified" content="2005-03-30 14:01:01"><title>OpenSSL: Documents, SSL_write(3)</title>

<style type="text/css"><!--
BODY { position: absolute; left: 0px; top: 0px; background: #666699; }
A { text-decoration: none; font-weight: bold; }
A:link { text-decoration: none; font-weight: bold; color: #666699; }
A:visited { text-decoration: none; font-weight: bold; color: #666699; }
A:hover { text-decoration: none; font-weight: bold; color: #666699; text-decoration: underline; }
#red { color: #cc3333; }
#sf { font-family: arial,helvetica; font-variant: normal; font-style: normal; }
#sfl { font-weight: bold; font-family: arial,helvetica; font-size: 16pt; line-height: 16pt; font-variant: normal; font-style: normal; }
H1 { font-weight: bold; font-size: 18pt; line-height: 18pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
H2 { font-weight: bold; font-size: 14pt; line-height: 14pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
H3 { font-weight: bold; font-size: 12pt; line-height: 12pt; font-family: arial,helvetica; font-variant: normal; font-style: normal; }
--></style></head>
<body leftmargin="0" rightmargin="0" topmargin="0" alink="#6666cc" bgcolor="#666699" link="#6666cc" marginheight="0" text="#000000" vlink="#6666cc">
<table summary="" border="0" cellpadding="0" cellspacing="0" width="100%">
  <tbody><tr><td align="left" bgcolor="#666699" width="100"><img src="SSL_write_dateien/page-head-tl.jpg" alt="OpenSSL" height="80" width="100"></td><td colspan="2" align="left" bgcolor="#666699" width="600"><img src="SSL_write_dateien/page-head-tm.jpg" alt="" height="80" width="600"></td><td align="right" bgcolor="#666699" width="20">&nbsp;&nbsp;&nbsp;</td><td align="right" bgcolor="#666699" width="50">&nbsp;</td></tr>
  <tr><td align="left" width="100"><img src="SSL_write_dateien/page-head-bl.jpg" alt="" height="20" width="100"></td><td align="left" width="20"><img src="SSL_write_dateien/page-head-bm.jpg" alt="" height="20" width="20"></td><td align="left" bgcolor="#ffffff" width="100%">
<table summary="" border="0" cellpadding="0" cellspacing="0">
        <tbody><tr>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://www.openssl.org/docs/" onmouseover="self.status = '../'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../'; return true" onblur="self.status = ''; return true"><font color="#666666">Index</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://www.openssl.org/docs/apps/openssl.html" onmouseover="self.status = '../apps/openssl.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../apps/openssl.html'; return true" onblur="self.status = ''; return true"><font color="#666666">openssl(1)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://www.openssl.org/docs/ssl/ssl.html" onmouseover="self.status = '../ssl/ssl.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../ssl/ssl.html'; return true" onblur="self.status = ''; return true"><font color="#666666">ssl(3)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://www.openssl.org/docs/crypto/crypto.html" onmouseover="self.status = '../crypto/crypto.html'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../crypto/crypto.html'; return true" onblur="self.status = ''; return true"><font color="#666666">crypto(3)</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://www.openssl.org/docs/HOWTO/" onmouseover="self.status = '../HOWTO/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../HOWTO/'; return true" onblur="self.status = ''; return true"><font color="#666666">HOWTO</font></a></font>&nbsp;</td><td>|</td>
<td><font face="Arial,Helvetica">&nbsp;<a href="http://www.openssl.org/docs/misc/" onmouseover="self.status = '../misc/'; return true" onmouseout="self.status = ''; return true" onfocus="self.status = '../misc/'; return true" onblur="self.status = ''; return true"><font color="#666666">misc</font></a></font>&nbsp;</td><td></td>
</tr>
      </tbody></table>
</td><td align="right" width="20"><img src="SSL_write_dateien/page-corner-tr.gif" alt="" height="20" width="20"></td><td align="right" bgcolor="#666699" width="50">&nbsp;</td></tr>
  <tr><td align="left" bgcolor="#666699" valign="top" width="100"><table summary="" border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><img src="SSL_write_dateien/page-navbar-top.jpg" alt="" height="11" width="100"></td></tr>
<script type="text/javascript" language="JavaScript">
<!-- Hiding the code
function nb_imgNormal(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_n.src');
        self.status = '';
    }
}
function nb_imgSelect(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_s.src');
        self.status = '';
    }
}
function nb_imgOver(imgName, nohints, descript) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_o.src');
        if (! nohints) self.status = descript;
    }
}
// done hiding -->
</script>
<script type="text/javascript" language="JavaScript">
<!-- Hiding the code
if (document.images) {
    nb_img1_title_n = new Image();
    nb_img1_title_n.src = '../../images/page-navbar-ti-n.jpg';
    nb_img1_title_o = new Image();
    nb_img1_title_o.src = '../../images/page-navbar-ti-s.jpg';
    nb_img1_FAQ_n = new Image();
    nb_img1_FAQ_n.src = '../../images/page-navbar-fq-n.jpg';
    nb_img1_FAQ_o = new Image();
    nb_img1_FAQ_o.src = '../../images/page-navbar-fq-s.jpg';
    nb_img1_about_n = new Image();
    nb_img1_about_n.src = '../../images/page-navbar-ab-n.jpg';
    nb_img1_about_o = new Image();
    nb_img1_about_o.src = '../../images/page-navbar-ab-s.jpg';
    nb_img1_news_n = new Image();
    nb_img1_news_n.src = '../../images/page-navbar-ne-n.jpg';
    nb_img1_news_o = new Image();
    nb_img1_news_o.src = '../../images/page-navbar-ne-s.jpg';
    nb_img1_docs_s = new Image();
    nb_img1_docs_s.src = '../../images/page-navbar-do-s.jpg';
    nb_img1_docs_o = new Image();
    nb_img1_docs_o.src = '../../images/page-navbar-do-s.jpg';
    nb_img1_source_n = new Image();
    nb_img1_source_n.src = '../../images/page-navbar-so-n.jpg';
    nb_img1_source_o = new Image();
    nb_img1_source_o.src = '../../images/page-navbar-so-s.jpg';
    nb_img1_contrib_n = new Image();
    nb_img1_contrib_n.src = '../../images/page-navbar-co-n.jpg';
    nb_img1_contrib_o = new Image();
    nb_img1_contrib_o.src = '../../images/page-navbar-co-s.jpg';
    nb_img1_support_n = new Image();
    nb_img1_support_n.src = '../../images/page-navbar-su-n.jpg';
    nb_img1_support_o = new Image();
    nb_img1_support_o.src = '../../images/page-navbar-su-s.jpg';
    nb_img1_related_n = new Image();
    nb_img1_related_n.src = '../../images/page-navbar-re-n.jpg';
    nb_img1_related_o = new Image();
    nb_img1_related_o.src = '../../images/page-navbar-re-s.jpg';
}
// done hiding -->
</script>
<tr><td><a href="http://www.openssl.org/" onmouseover="nb_imgOver('nb_img1_title', 0, 'Title'); return true" onmouseout="nb_imgNormal('nb_img1_title'); return true" onfocus="nb_imgOver('nb_img1_title', 0, 'Title'); return true" onblur="nb_imgNormal('nb_img1_title'); return true"><img name="nb_img1_title" src="SSL_write_dateien/page-navbar-ti-n.jpg" alt="Title" border="0" height="27" width="100"></a></td></tr>
<tr><td><a href="http://www.openssl.org/support/faq.html" onmouseover="nb_imgOver('nb_img1_FAQ', 0, 'FAQ'); return true" onmouseout="nb_imgNormal('nb_img1_FAQ'); return true" onfocus="nb_imgOver('nb_img1_FAQ', 0, 'FAQ'); return true" onblur="nb_imgNormal('nb_img1_FAQ'); return true"><img name="nb_img1_FAQ" src="SSL_write_dateien/page-navbar-fq-n.jpg" alt="FAQ" border="0" height="27" width="100"></a></td></tr>
<tr><td><a href="http://www.openssl.org/about/" onmouseover="nb_imgOver('nb_img1_about', 0, 'About'); return true" onmouseout="nb_imgNormal('nb_img1_about'); return true" onfocus="nb_imgOver('nb_img1_about', 0, 'About'); return true" onblur="nb_imgNormal('nb_img1_about'); return true"><img name="nb_img1_about" src="SSL_write_dateien/page-navbar-ab-n.jpg" alt="About" border="0" height="27" width="100"></a></td></tr>
<tr><td><a href="http://www.openssl.org/news/" onmouseover="nb_imgOver('nb_img1_news', 0, 'News'); return true" onmouseout="nb_imgNormal('nb_img1_news'); return true" onfocus="nb_imgOver('nb_img1_news', 0, 'News'); return true" onblur="nb_imgNormal('nb_img1_news'); return true"><img name="nb_img1_news" src="SSL_write_dateien/page-navbar-ne-n.jpg" alt="News" border="0" height="27" width="100"></a></td></tr>
<tr><td><a href="http://www.openssl.org/docs/" onmouseover="nb_imgOver('nb_img1_docs', 0, 'Documents'); return true" onmouseout="nb_imgSelect('nb_img1_docs'); return true" onfocus="nb_imgOver('nb_img1_docs', 0, 'Documents'); return true" onblur="nb_imgSelect('nb_img1_docs'); return true"><img name="nb_img1_docs" src="SSL_write_dateien/page-navbar-do-s.jpg" alt="Documents" border="0" height="27" width="100"></a></td></tr>
<tr><td><a href="http://www.openssl.org/source/" onmouseover="nb_imgOver('nb_img1_source', 0, 'Source'); return true" onmouseout="nb_imgNormal('nb_img1_source'); return true" onfocus="nb_imgOver('nb_img1_source', 0, 'Source'); return true" onblur="nb_imgNormal('nb_img1_source'); return true"><img name="nb_img1_source" src="SSL_write_dateien/page-navbar-so-n.jpg" alt="Source" border="0" height="27" width="100"></a></td></tr>
<tr><td><a href="http://www.openssl.org/contrib/" onmouseover="nb_imgOver('nb_img1_contrib', 0, 'Contribution'); return true" onmouseout="nb_imgNormal('nb_img1_contrib'); return true" onfocus="nb_imgOver('nb_img1_contrib', 0, 'Contribution'); return true" onblur="nb_imgNormal('nb_img1_contrib'); return true"><img name="nb_img1_contrib" src="SSL_write_dateien/page-navbar-co-n.jpg" alt="Contribution" border="0" height="27" width="100"></a></td></tr>
<tr><td><a href="http://www.openssl.org/support/" onmouseover="nb_imgOver('nb_img1_support', 0, 'Support'); return true" onmouseout="nb_imgNormal('nb_img1_support'); return true" onfocus="nb_imgOver('nb_img1_support', 0, 'Support'); return true" onblur="nb_imgNormal('nb_img1_support'); return true"><img name="nb_img1_support" src="SSL_write_dateien/page-navbar-su-n.jpg" alt="Support" border="0" height="27" width="100"></a></td></tr>
<tr><td><a href="http://www.openssl.org/related/" onmouseover="nb_imgOver('nb_img1_related', 0, 'Related'); return true" onmouseout="nb_imgNormal('nb_img1_related'); return true" onfocus="nb_imgOver('nb_img1_related', 0, 'Related'); return true" onblur="nb_imgNormal('nb_img1_related'); return true"><img name="nb_img1_related" src="SSL_write_dateien/page-navbar-re-n.jpg" alt="Related" border="0" height="27" width="100"></a></td></tr>
    <tr><td><img src="SSL_write_dateien/page-navbar-bot.jpg" alt="" height="150" width="100"><br><p></p></td></tr>
  </tbody></table>
</td><td align="left" bgcolor="#ffffff" valign="top" width="20">&nbsp;</td><td align="left" bgcolor="#ffffff" valign="top"><br>
        
<h1>SSL_write(3)</h1>
<!-- INDEX BEGIN -->
<ul>
	<li><a href="#NAME">NAME</a>
	</li><li><a href="#SYNOPSIS">SYNOPSIS</a>
	</li><li><a href="#DESCRIPTION">DESCRIPTION</a>
	</li><li><a href="#NOTES">NOTES</a>
	</li><li><a href="#WARNING">WARNING</a>
	</li><li><a href="#RETURN_VALUES">RETURN VALUES</a>
	</li><li><a href="#SEE_ALSO">SEE ALSO</a>
</li></ul>
<!-- INDEX END -->
<hr>
<p>
</p><hr>
<h1><a name="NAME">NAME</a></h1>
<p>
SSL_write - write bytes to a TLS/SSL connection.
</p>
<p>
</p><hr>
<h1><a name="SYNOPSIS">SYNOPSIS</a></h1>
<pre> #include &lt;openssl/ssl.h&gt;
</pre>
<pre> int SSL_write(SSL *ssl, const void *buf, int num);
</pre>
<p>
</p><hr>
<h1><a name="DESCRIPTION">DESCRIPTION</a></h1>
<p>
<code>SSL_write()</code> writes <strong>num</strong> bytes from the buffer <strong>buf</strong> into the specified
<strong>ssl</strong> connection.
</p>
<p>
</p><hr>
<h1><a name="NOTES">NOTES</a></h1>
<p>
If necessary, <code>SSL_write()</code> will negotiate a TLS/SSL session, if
not already explicitly performed by <a href="http://www.openssl.org/docs/ssl/SSL_connect.html#">SSL_connect(3)</a> or
<a href="http://www.openssl.org/docs/ssl/SSL_accept.html#">SSL_accept(3)</a>. If the peer requests a re-negotiation, it will be performed transparently
during the <code>SSL_write()</code> operation. The behaviour of
<code>SSL_write()</code> depends on the underlying BIO.
</p>
<p>
For the transparent negotiation to succeed, the <strong>ssl</strong> must have been initialized to client or server mode. This is being done by
calling
<a href="http://www.openssl.org/docs/ssl/SSL_set_connect_state.html#">SSL_set_connect_state(3)</a> or <code>SSL_set_accept_state()</code> before the first call to an <a href="http://www.openssl.org/docs/ssl/SSL_read.html#">SSL_read(3)</a> or <code>SSL_write()</code> function.
</p>
<p>
If the underlying BIO is <strong>blocking</strong>, <code>SSL_write()</code> will only return, once the write operation has
been finished or an error occurred, except when a renegotiation take place,
in which case a SSL_ERROR_WANT_READ may occur. This behaviour can be
controlled with the SSL_MODE_AUTO_RETRY flag of the
<a href="http://www.openssl.org/docs/ssl/SSL_CTX_set_mode.html#">SSL_CTX_set_mode(3)</a> call.
</p>
<p>
If the underlying BIO is <strong>non-blocking</strong>, <code>SSL_write()</code> will also return, when the underlying BIO could
not satisfy the needs of <code>SSL_write()</code> to continue the
operation. In this case a call to
<a href="http://www.openssl.org/docs/ssl/SSL_get_error.html#">SSL_get_error(3)</a> with the return value of <code>SSL_write()</code> will yield <strong>SSL_ERROR_WANT_READ</strong> or
<strong>SSL_ERROR_WANT_WRITE</strong>. As at any time a re-negotiation is possible, a call to
<code>SSL_write()</code> can also cause read operations! The calling
process then must repeat the call after taking appropriate action to
satisfy the needs of <code>SSL_write().</code> The action depends on the
underlying BIO. When using a non-blocking socket, nothing is to be done,
but <code>select()</code> can be used to check for the required condition.
When using a buffering BIO, like a BIO pair, data must be written into or
retrieved out of the BIO before being able to continue.
</p>
<p>
<code>SSL_write()</code> will only return with success, when the complete
contents of <strong>buf</strong> of length <strong>num</strong> has been written. This default behaviour can be changed with the
SSL_MODE_ENABLE_PARTIAL_WRITE option of
<a href="http://www.openssl.org/docs/ssl/SSL_CTX_set_mode.html#">SSL_CTX_set_mode(3)</a>. When this flag is set, <code>SSL_write()</code> will also return with
success, when a partial write has been successfully completed. In this case
the <code>SSL_write()</code> operation is considered completed. The bytes
are sent and a new <code>SSL_write()</code> operation with a new buffer
(with the already sent bytes removed) must be started. A partial write is
performed with the size of a message block, which is 16kB for SSLv3/TLSv1.
</p>
<p>
</p><hr>
<h1><a name="WARNING">WARNING</a></h1>
<p>
When an <code>SSL_write()</code> operation has to be repeated because of
<strong>SSL_ERROR_WANT_READ</strong> or <strong>SSL_ERROR_WANT_WRITE</strong>, it must be repeated with the same arguments.
</p>
<p>
When calling <code>SSL_write()</code> with num=0 bytes to be sent the
behaviour is undefined.
</p>
<p>
</p><hr>
<h1><a name="RETURN_VALUES">RETURN VALUES</a></h1>
<p>
The following return values can occur:
</p>
<dl>
<dt><strong><a name="item_gt0">&gt;0</a></strong></dt><dd>
<p>
The write operation was successful, the return value is the number of bytes
actually written to the TLS/SSL connection.
</p>
</dd><dt><strong><a name="item_0">0</a></strong></dt><dd>
<p>
The write operation was not successful. Probably the underlying connection
was closed. Call <code>SSL_get_error()</code> with the return value <strong>ret</strong> to find out, whether an error occurred or the connection was shut down
cleanly (SSL_ERROR_ZERO_RETURN).
</p>
<p>
SSLv2 (deprecated) does not support a shutdown alert protocol, so it can
only be detected, whether the underlying connection was closed. It cannot
be checked, why the closure happened.
</p>
</dd><dt><strong><a name="item_lt0">&lt;0</a></strong></dt><dd>
<p>
The write operation was not successful, because either an error occurred or
action must be taken by the calling process. Call
<code>SSL_get_error()</code> with the return value <strong>ret</strong> to find out the reason.
</p>
</dd></dl>
<p>
</p><hr>
<h1><a name="SEE_ALSO">SEE ALSO</a></h1>
<p>
<a href="http://www.openssl.org/docs/ssl/SSL_get_error.html#">SSL_get_error(3)</a>, <a href="http://www.openssl.org/docs/ssl/SSL_read.html#">SSL_read(3)</a>,
<a href="http://www.openssl.org/docs/ssl/SSL_CTX_set_mode.html#">SSL_CTX_set_mode(3)</a>, <a href="http://www.openssl.org/docs/ssl/SSL_CTX_new.html#">SSL_CTX_new(3)</a>,
<a href="http://www.openssl.org/docs/ssl/SSL_connect.html#">SSL_connect(3)</a>, <a href="http://www.openssl.org/docs/ssl/SSL_accept.html#">SSL_accept(3)</a>
<a href="http://www.openssl.org/docs/ssl/SSL_set_connect_state.html#">SSL_set_connect_state(3)</a>,
<a href="http://www.openssl.org/docs/ssl/ssl.html#">ssl(3)</a>, <a href="http://www.openssl.org/docs/crypto/bio.html#">bio(3)</a>
</p>
        </td><td align="right" bgcolor="#ffffff" width="20">&nbsp;&nbsp;&nbsp;</td><td align="right" bgcolor="#666699" width="50">&nbsp;</td></tr>
  <tr><td align="left" bgcolor="#666699" valign="top" width="100">&nbsp;</td><td align="left" width="20"><img src="SSL_write_dateien/page-corner-bl.gif" alt="" height="20" width="20"></td><td align="left" bgcolor="#ffffff" valign="top">&nbsp;</td><td align="right" width="20"><img src="SSL_write_dateien/page-corner-br.gif" alt="" height="20" width="20"></td><td align="right" bgcolor="#666699" width="50">&nbsp;</td></tr>
  <tr><td colspan="5" bgcolor="#666699">&nbsp;</td></tr>
</tbody></table>
</body></html>